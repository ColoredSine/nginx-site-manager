# Nginx Site Manager (nsm) üöÄ\n\n**Nginx Site Manager (nsm)** is a lightweight and powerful bash script designed to streamline the management of Nginx site configurations. It simplifies common tasks for system administrators, such as enabling, disabling, editing, deleting, renaming, and listing Nginx sites, as well as reloading the Nginx service. Whether you're managing a single site or multiple sites, `nsm` offers an intuitive CLI interface to save time and reduce errors.\n\nBuilt with simplicity and efficiency in mind, `nsm` works with the standard Nginx `sites-available` and `sites-enabled` structure, commonly used in Debian/Ubuntu environments. It's perfect for sysadmins, DevOps engineers, and anyone who wants to manage Nginx configurations with ease.\n\n**License:** MIT\n\n## Key Features üåü\n\n- **Enable/Disable Sites**: Use `e` to enable or `d` to disable sites by managing symlinks between `sites-available` and `sites-enabled`. Add `r` (e.g., `er`, `dr`) to automatically reload Nginx.\n- **Edit Configurations**: Edit site configurations with `ed` (creates new if not exists) or `edr` to edit and reload Nginx if changes are saved. Smart change detection ensures reloads only when necessary.\n- **Delete Sites**: Delete a single site (`del <site>`) or multiple sites (`del \"site1,site2\"`) in one command, with optional automatic Nginx reload.\n- **Rename Sites**: Rename sites with `mv <old> <new>`, automatically updating symlinks if the site is enabled.\n- **List Sites**: View all available sites and their status (`enabled` or not) with `l`.\n- **Reload Nginx**: Reload Nginx configuration with `r`, including a syntax check before reload.\n- **Navigate Easily**: Jump to the Nginx config directory (`/etc/nginx`) with `f` for quick manual edits.\n\n## Example Commands and Outputs üìã\n\n### Listing Sites\n\n```bash\nnsm l\n```\n\n**Output**:\n\n```\nAvailable sites (/etc/nginx/sites-available):\n  default [enabled]\n  site1\n  site2 [enabled]\n```\n\n### Enabling a Site\n\n```bash\nnsm e site1\n```\n\n**Output**:\n\n```\nSite 'site1' enabled successfully\nRun 'nsm r' to apply changes\n```\n\n### Deleting Multiple Sites\n\n```bash\nnsm del \"site1,site2\"\n```\n\n**Output**:\n\n```\nSite 'site1' configuration deleted successfully\nSymlink for site 'site2' removed\nSite 'site2' configuration deleted successfully\nNginx reloaded successfully\n```\n\n### Editing a Site Configuration\n\n```bash\nnsm ed default\n```\n\n**Output**:\n\n```\nChanges saved for site 'default'\nRun 'nsm r' to apply changes if you modified/saved the configuration\n```\n\n## Installation üõ†Ô∏è\n\nFollow these steps to install `nsm` on your system:\n\n1. **Download the Script**:\n\n    ```bash\n    wget https://raw.githubusercontent.com/ColoredSine/nginx-site-manager/main/nsm\n    ```\n\n2. **Make it Executable**:\n\n    ```bash\n    chmod +x nsm\n    ```\n\n3. **Move to a System Path**:\n\n    ```bash\n    sudo mv nsm /usr/local/bin/\n    ```\n\n4. **Verify Installation**:\n\n    ```bash\n    nsm -h\n    ```\n\n    This will display the help message with all available commands.\n\n## Requirements üì¶\n\n- **Bash**: The script runs in any standard bash environment.\n- **Nginx**: Must be installed and configured with `sites-available` and `sites-enabled` directories (common in Debian/Ubuntu).\n- **Vim**: Default editor for the `ed`/`edr` commands (configurable via the `CONFIG_EDITOR` variable in the script).\n- **stat**: Used to detect file modifications during editing.\n\n## Usage üìñ\n\n```bash\nnsm [command] [site_name] [options]\n```\n\n### Available Commands\n\n| Command          | Description                                      | Example                     |\n|------------------|--------------------------------------------------|-----------------------------|\n| `e <site>`       | Enable a site (create symlink)                  | `nsm e default`            |\n| `d <site>`       | Disable a site (remove symlink)                 | `nsm d default`            |\n| `er`/`re <site>` | Enable a site and reload Nginx                  | `nsm er default`           |\n| `dr`/`rd <site>` | Disable a site and reload Nginx                 | `nsm dr default`           |\n| `ed <site>`      | Edit site configuration (create if not exists)  | `nsm ed default`           |\n| `edr <site>`     | Edit and reload Nginx if saved                  | `nsm edr default`          |\n| `l`              | List available sites with status                | `nsm l`                    |\n| `r`              | Reload Nginx configuration                      | `nsm r`                    |\n| `f`              | Navigate to `/etc/nginx` directory              | `nsm f`                    |\n| `mv <old> <new>` | Rename a site configuration                     | `nsm mv oldsite newsite`   |\n| `del <site> \\| \"<site1,site2,...>\"` | Delete one or multiple sites        | `nsm del \"site1,site2\"`    |\n| `-h`             | Show help message                               | `nsm -h`                   |\n\n## Contributing ü§ù\n\nWe welcome contributions to improve `nsm`! Here's how you can help:\n\n- Fork the repository.\n- Create a new branch (`git checkout -b feature-name`).\n- Make your changes and commit (`git commit -m \"Add feature\"`).\n- Push to your branch (`git push origin feature-name`).\n- Open a pull request.\n\nIf you find a bug or have a feature request, please open an issue on GitHub.\n\n## License üìú\n\nThis project is licensed under the [MIT License](LICENSE).\n\n## Acknowledgements üôå\n\nBuilt with üíô by [ColoredSine](https://github.com/ColoredSine) for the sysadmin community.\n\n**Thank you for using Nginx Site Manager!**
